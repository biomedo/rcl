% Copyright 2011 by Weidong LIAN
% 
% This file may be distributed and/or modified
% 
% 1. under the LaTeX Project Public License and/or
% 2. under the GNU Public License.
% 
% See the file doc/licenses/LICENSE for more details.

\setbeamercovered{transparent}

% remove navigation symbols bar in the right bottom, if you would like
% to keep that navigation symbols, please comment this line
\setbeamertemplate{navigation symbols}{} 


\newif\ifbeamer@sb@subsection

\DeclareOptionBeamer{subsection}[false]{\csname beamer@sb@subsection#1\endcsname}
\ExecuteOptionsBeamer{subsection=false}
\ProcessOptionsBeamer



\mode<presentation>

\setbeamercolor{frametitle}{parent=palette primary}
\setbeamercolor{subsection in head/foot}{parent=palette secondary}
\setbeamercolor{section in head/foot}{parent=palette quaternary}


\beamer@compresstrue

\AtBeginDocument{
  {
    \usebeamerfont*{headline}
    \colorlet{global.bg}{bg}
    \usebeamercolor{subsection in head/foot}
    \usebeamercolor{section in head/foot}
    \usebeamercolor{frametitle}

    \ifbeamer@sb@subsection
    \pgfdeclareverticalshading{beamer@barshade}{\the\paperwidth}{%
      color(0ex)=(global.bg);%
      color(1ex)=(subsection in head/foot.bg);%
      color(3.25ex)=(subsection in head/foot.bg);%
      color(4.25ex)=(section in head/foot.bg);%
      color(9.75ex)=(section in head/foot.bg)%
    }
    \pgfdeclareverticalshading{beamer@aboveframetitle}{\the\paperwidth}{%
      color(0ex)=(frametitle.bg);%
      color(1ex)=(frametitle.bg);%
      color(2ex)=(subsection in head/foot.bg)
    }
    \else
    \pgfdeclareverticalshading{beamer@barshade}{\the\paperwidth}{%
      color(0ex)=(global.bg);%
      color(1ex)=(section in head/foot.bg);%
      color(7ex)=(section in head/foot.bg)%
    }
    \pgfdeclareverticalshading{beamer@aboveframetitle}{\the\paperwidth}{%
      color(0ex)=(frametitle.bg);%
      color(1ex)=(frametitle.bg);%
      color(2ex)=(section in head/foot.bg)
    }
    \fi  

    \pgfdeclareverticalshading{beamer@belowframetitle}{\the\paperwidth}{%
      color(0ex)=(global.bg);%
      color(1ex)=(frametitle.bg)
    }
  }
}

% Head
\defbeamertemplate*{headline}{smoothbars theme}
{%
  \pgfuseshading{beamer@barshade}%
  \ifbeamer@sb@subsection%
  \vskip-9.75ex%
  \else%
  \vskip-7ex%
  \fi%
  \hbox{
    \begin{beamercolorbox}[ignorebg,wd=0.94\paperwidth,ht=2.25ex,dp=3.75ex]{section in head/foot}
      \insertnavigation{0.94\paperwidth}
    \end{beamercolorbox}%
    \begin{beamercolorbox}[ignorebg,wd=0.06\paperwidth,ht=2.25ex,dp=3.75ex,center]{section in head/foot}
      \insertframenumber{}/\inserttotalframenumber
    \end{beamercolorbox}
  }
  \ifbeamer@sb@subsection%
  \begin{beamercolorbox}[ignorebg,ht=2.125ex,dp=1.125ex,%
    leftskip=.3cm,rightskip=.3cm plus1fil]{subsection in head/foot}
    \usebeamerfont{subsection in head/foot}\insertsubsectionhead
  \end{beamercolorbox}%
  \fi%
}%


\defbeamertemplate*{frametitle}{smoothbars theme}
{%
  \nointerlineskip%
  \usebeamerfont{headline}%
  \begin{beamercolorbox}[wd=\paperwidth,ht=1.5ex,dp=0ex,vmode]{empty}
    \pgfuseshading{beamer@aboveframetitle}%
  \end{beamercolorbox}%
  \vskip-.5ex%
  \nointerlineskip%
  \begin{beamercolorbox}[wd=\paperwidth,leftskip=.3cm,rightskip=.3cm plus1fil,vmode]{frametitle}
    \usebeamerfont*{frametitle}\insertframetitle%
    \ifx\insertframesubtitle\@empty%
    \strut\par%
    \else
    \par{\usebeamerfont*{framesubtitle}{\usebeamercolor[fg]{framesubtitle}\insertframesubtitle}\strut\par}%
    \fi%%
    \usebeamerfont{headline}%
    \vskip.5ex  
  \end{beamercolorbox}%
  \nointerlineskip
  \begin{beamercolorbox}[wd=\paperwidth,ht=.5ex,dp=0ex]{empty}
    \pgfuseshading{beamer@belowframetitle}%
  \end{beamercolorbox}%
}


\useinnertheme[shadow=true]{rounded}
\usecolortheme{orchid}
\usecolortheme{whale}

\setbeamerfont{block title}{size={}}

\mode
<all>
